apiVersion: core.inference-gateway.com/v1alpha1
kind: Gateway
metadata:
  name: gateway-rbac-example
  namespace: inference-gateway
spec:
  # Image for the gateway
  image: "ghcr.io/inference-gateway/inference-gateway:latest"
  
  # Replicas for the deployment
  replicas: 1
  
  # ServiceAccount configuration for RBAC
  serviceAccount:
    # Create a service account (default: true)
    create: true
    # Custom name for the service account (optional)
    # If not specified, uses the gateway name
    name: "custom-gateway-sa"
  
  # A2A configuration with service discovery
  a2a:
    enabled: true
    serviceDiscovery:
      enabled: true
      # Namespace to search for A2A agents
      namespace: "agents"
      pollingInterval: "30s"
  
  # Basic server configuration
  server:
    host: "0.0.0.0"
    port: 8080
  
  # Service configuration
  service:
    type: ClusterIP
    port: 8080

---
# Example of a Gateway with RBAC disabled
apiVersion: core.inference-gateway.com/v1alpha1
kind: Gateway
metadata:
  name: gateway-no-rbac
  namespace: inference-gateway
spec:
  # Image for the gateway
  image: "ghcr.io/inference-gateway/inference-gateway:latest"
  
  # Replicas for the deployment
  replicas: 1
  
  # ServiceAccount configuration - disable RBAC creation
  serviceAccount:
    # Don't create RBAC resources - user manages them manually
    create: false
    # Use existing service account
    name: "existing-service-account"
  
  # Basic server configuration
  server:
    host: "0.0.0.0"
    port: 8080
  
  # Service configuration
  service:
    type: ClusterIP
    port: 8080